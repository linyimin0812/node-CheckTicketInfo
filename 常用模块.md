1. compression模块
一个压缩中间件，对响应体内容进行压缩，显著降低响应主体的大小，从而提高Web应用程序的响应速度。
使用方法：
```
let compression = require("compression");
let express = require("express);
let app = new express();
app.use(compression());
```

链接：https://github.com/expressjs/compression


2. lusca模块

链接：http://xuecheng.sinaapp.com/?p=383

常见攻击类型及防御策略：

1.XSS(Cross-site Scripting)

    XSS(跨站脚本攻击)是一种通过注入非本站点的脚本程序来进行攻击的一种手段。通常是攻击者通过web站点的漏洞，将恶意js脚本注入到web站点中，执行后会影响网站功能的正常使用甚至泄露正常用户的隐私信息。

    因此在服务端，应该针对用户的所有可能的提交操作进行过滤，过滤非法字符或者对html标签进行转译，防止用户提交的信息显示在页面上的时候执行用户输入的恶意代码。

    现代浏览器也考虑到了这个安全问题，做了同源策略过滤xss。在老式浏览器IE8上可以通过设置 “X-XSS-Protection"请求头来开启对表单提交的检查，过滤恶意脚本。

    lusca模块提供了xssProtection方法来设置 “X-XSS-Protection"请求/响应头。

    lusca.xssProtection(options):

        options.enabled Boolean，真为开启。默认1.

        options.mode String，默认为 block，作用是检查到xss攻击时停止页面渲染。

2.CSRF(Cross Site Request Forgery)

    CSRF(跨站请求伪造)是一种诱使用户发出用户不希望的请求的攻击方式。利用用户已登录的权限诱导用户触发被攻击者修改过的链接或事件，达到窃取用户信息甚至利用用户身份执行一些涉及用户权限的操作。

    举一个例子：用户访问A网站，登录过保存了cookie，状态更改为已登录。攻击者发送一个吸引用户点击的B页面上的链接，用户点击则触发了由攻击者构造的请求，该请求的目标是A网站，参数被攻击者构造为对自己有利的，例如转账链接的参数是转给C，被攻击者构造成是转给攻击者。此时A网站验证用户的身份是已登录，而且请求是用户发出的。直接触发了恶意链接，转账成功。

    漏洞出现原因是网站A没有对请求的来源做验证，请求是在攻击者构造的B页面上，B页面不属于A站点的页面，而且允许正常发出请求的页面来源应该是A站点的特定页面，服务端没有对请求来源做验证，也就没办法确定用户是在哪个页面上发出的请求。

    解决办法是在用户登录A站点，访问某一页面的时候，在页面的响应头加入token参数，用户再次发送请求的时候把这个token加在请求头里，这样服务器就知道用户确定是来着哪个页面的请求了。

    lusca模块提供了csrf模块来设置csrf验证策略。

    lusca.csrf(options):

        options.key: String，添加到模型中的csrf token键名，默认是"_csrf"。

        options.secret: String，在服务器端session对象中的token键名，默认是"_csrfSecret"。

        options.impl: Function，自定义生成token的方法。

        cookie: String，存在cookie中的token名字。

        angular: Boolean，对应angular的快捷csrf验证配置。

3.ClickJacking

    ClickJacking(点击劫持)是一种视觉欺骗手段，在web端就是iframe嵌套一个透明不可见的页面，让用户在不知情的情况下，点击攻击者想要欺骗用户点击的位置。

    举一个例子：

        攻击者做了一个有吸引力的网页A，然后引入一个iframe设置为透明覆盖在页面上，iframe内的网页B是希望用户去点击的。将希望用户点击的B页面上的按钮，跟攻击者页面A的按钮位置重合，由于页面A是攻击者制作的，富有吸引力的按钮或者链接可能是小黄图或者小游戏之类的东东，某些用户会点击数百次，但这些点击都落到的目标页面B上。

    通过设置"X-Frame-Options"响应头，可以告诉浏览器不要被非同源站点作为frame引入。

    lusca提供了xframe方法来设置响应头。

    lusca.xframe(value)，String，必填，DENY, SAMEORIGIN 或者r ALLOW-FROM uri。

4.CSP(Content Security Policy)

    CSP(内容安全策略)是一种由开发者定义的安全性政策性申明，通过CSP所约束的的规责指定可信的内容来源（这里的内容可以指脚本、图片、iframe、fton、style等等可能的远程的资源）。通过CSP协定，让WEB处于一个安全的运行环境中。

    一个web站点通常会有引入图片、字体、样式、页面框架等的地方。网站的内容在用户提交的过程中可能出现插入图片、字体、样式等内容的需求，通过制定CSP策略可以限制静态资源来自可信的地址。关于CSP的W3C文档地址：http://w3c.github.io/webappsec-csp/ 。

    lusca模块提供了csp模块来设置csp策略。

    lusca.csp(options):

        options.policy: Object，策略配置。

        options.reportOnly: Boolean。

        options.reportUri: String，发送report datad的来源。




